language: cpp

sudo: required
dist: trusty

before_install:
    - sudo apt-get -qq update 2>&1 | tee /tmp/apt.log
    - fgrep Failed /tmp/apt.log && sleep 60 && rm /tmp/apt.log && sudo apt-get -qq update 2>&1 | tee /tmp/apt.log || true
    - fgrep Failed /tmp/apt.log && sleep 60 && rm /tmp/apt.log && sudo apt-get -qq update 2>&1 | tee /tmp/apt.log || true
    - travis_retry sudo apt-get install -y fbset v86d

script:
- sudo dmesg | grep fb
- find /lib/modules | grep vesafb
- sudo echo  "options uvesafb mode_option=1280x800-32 scroll=ywrap" > /etc/modprobe.d/uvesafb.conf
- sudo modprobe uvesafb
- sudo dmesg | tail -50 
- sudo fbset -i
- sudo lsmod
- sudo ls -la /dev
- sudo cat /proc/cmdline
- echo done!

